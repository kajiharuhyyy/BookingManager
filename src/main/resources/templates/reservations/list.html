<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title>Reservations</title>
</head>
<body>
<h1>予約一覧</h1>

<form th:action="@{/reservations}" method="get">
  <label>会議室：</label>
  <select name="roomId">
    <option value="">-- 全て --</option>
    <option th:each="r : ${rooms}"
            th:value="${r.id}"
            th:text="${r.name}"
            th:selected="${selectedRoomId != null and r.id == selectedRoomId}">
    </option>
  </select>

  <label>日付：</label>
  <input type="date" name="bookDate" th:value="${selectedBookDate}" />

  <button type="submit">検索</button>
  <a th:href="@{/reservations/new}">新規予約</a>
</form>

<hr/>

<table border="1" cellpadding="6">
  <thead>
    <tr>
      <th>ID</th>
      <th>会議室</th>
      <th>日付</th>
      <th>開始</th>
      <th>終了</th>
      <th>予約名</th>
      <th>担当者</th>
      <th>状態</th>
      <th>操作</th>
    </tr>
  </thead>
  <tbody>
    <tr th:each="res : ${reservations}">
      <td th:text="${res.id}"></td>
      <td th:text="${res.room.name}"></td>
      <td th:text="${res.bookDate}"></td>
      <td th:text="${res.startTime}"></td>
      <td th:text="${res.endTime}"></td>
      <td th:text="${res.title}"></td>
      <td th:text="${res.personName}"></td>
      <td th:text="${res.status}"></td>

      <td>
        <form th:action="@{/reservations/{id}/cancel(id=${res.id})}" method="post">
          <button type="submit">キャンセル</button>
        </form>
      </td>
    </tr>
  </tbody>
</table>

</body>
</html>